
# 一、入门简介
``注意！！！由于本文主要探讨Android内核，因此后续文字如不额外说明，均认为内核指代的是Android内核！！！``
## **介绍**
### 一、内核的概念
- Q:内核有什么用？
> A:内核在某种程度直接或间接地影响了整个Android系统的稳定性，内核的优化程度的高低可以一定程度上影响性能，内核的精简程度一定上影响了手机的省电程度

### **你需要的东西有：** 
> - 一台安装了Linux的电脑 Mac也可以 本文使用 Ubuntu 19.04
> -  一个没有问题的源码
> - 一个脑子 

# 二、准备编译
## **准备工作**
### 1.下载交叉编译工具链
#### 安装以下支持
```
sudo apt update
sudo apt-get install -y openssl ccache bc bash git-core gnupg build-essential zip curl make automake autogen autoconf autotools-dev libtool shtool python  m4 gcc libtool zlib1g-dev flex gcc-aarch64-linux-gnu libssl-dev
```
- 下载源码
> 提供部分源码 [一加](https://github.com/OnePlusOSS) [小米](https://github.com/OnePlusOSS) [android-linux-stable](https://github.com/android-linux-stable)
- 下载咕歌提供的Clang编译器:
> [点我去]( https://android.googlesource.com/platform/prebuilts/clang/host/linux-x86/), [咕歌的介绍]( https://android.googlesource.com/platform/prebuilts/clang/host/linux-x86/+/ab0d33f38cde1018896119c02392fadc1b97fa15/README.md#android-clang_llvm-prebuilts)
- 解压：
> 使用tar -Jxf [文件名]来解压.tar.xz文件（会解压到新文件夹内）
使用tar -zxf [文件名]来解压.tar.gz文件（会解压到当前文件夹内）

`export LD_LIBRARY_PATH="clang的文件夹"/bin/../lib:$PATH`  
` make ARCH=arm64 O="输出路径" "配置文件"`
` PATH="clang的文件夹" //bin:${PATH} `
` make -j线程速  O="输出路径" `
` ARCH=arm64 `
` CC+=clang `
` CLANG_TRIPLE+=aarch64-linux-gnu- ` 
` CROSS_COMPILE+=aarch64-linux-gnu- `
` CROSS_COMPILE_ARM32+=arm-linux-gnueabi-`

# 三、制作及刷入
- 内核文件在[你的项目/输出路径/arch/目标内核架构/boot]下，自己复制出来然后使用[AnyKernel3](https://github.com/osm0sis/AnyKernel3)打包一下
> 那我不会用AnyKernel怎么办？ [看我](https://github.com/osm0sis/AnyKernel3/blob/master/README.md)
> [可参考 @LibXZR](https://akr-developers.com/d/125)
- 打包成功后使用`TWRP`刷入即可

# 四、 写在最后 
> 友情链接  [XZR带佬](https://akr-developers.com/d/108-defconfig) [流念带佬](https://akr-developers.com/d/118-clangbuiltlinux-clang-by-julian)
> 我是个菜鸡 本文有很多错误 带佬们可以提供建议
